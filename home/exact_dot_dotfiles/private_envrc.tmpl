# vim: filetype=bash

if [ -n "$ZSH_VERSION" ]; then
  setopt +o nomatch
else
  shopt -u nullglob
fi

export PUB_CACHE="$HOME/.pub-cache"

export PATH="$HOME/.nimble/bin:$PATH"
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.dotfiles/scripts:$PATH"
export PATH="$PUB_CACHE/bin:$PATH"

for bin_dir in ~/.dotfiles/deps/*/.local/bin; do
  export PATH="$bin_dir:$PATH"
done

for bin_dir in ~/.dotfiles/deps/*/.local/usr/bin; do
  export PATH="$bin_dir:$PATH"
done

export GIT_CONFIG_GLOBAL="$HOME/.dotfiles/gitconfig/main"

{{- if (index . "gitlab") }}
export GITLAB_ACCESS_TOKEN={{ .gitlab.token | quote }}
{{- end }}

{{- if (index . "github") }}
export GITHUB_ACCESS_TOKEN={{ .github.token | quote }}
{{- end }}

case "$(uname -s)" in
*_NT*)
  export PATH="/c/PROGRA~1/Microsoft Visual Studio/2022/Community/VC/Tools/Llvm/x64/bin:$PATH"
  export PATH="/c/PROGRA~2/Microsoft Visual Studio/Shared/Python39_64:$PATH"
  export PATH="/c/PROGRA~1/Microsoft Visual Studio/2022/Community/MSBuild/Microsoft/VisualStudio/NodeJs:$PATH"

  alias npm="cmd -c npm.cmd"
  ;;
*)
  export PATH="/Applications/Visual Studio Code.app/Contents/Resources/app/bin:$PATH"
  export PATH="/Applications/Alacritty.app/Contents/MacOS:$PATH"

  eval "$(brew shellenv)"

  alias studio="open -a /Applications/Android\ Studio.app"
  ;;
esac

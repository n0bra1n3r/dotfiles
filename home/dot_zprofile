source ~/.dotfiles/shellrc

function _workspace() {
  reply=()
  if git rev-parse --is-inside-work-tree >/dev/null 2>&1; then
    local locals="$(git for-each-ref --sort=-committerdate --format='%(refname:lstrip=2)' refs/heads/)"
    local remotes="$(git for-each-ref --sort=-committerdate --format='%(refname:lstrip=3)' refs/remotes/)"
    local current="$(git branch --show-current)"
    reply=($(echo -e "$locals\n$remotes" | grep -v HEAD | grep -v "$current" | sort -u))
  fi
}

compctl -K _workspace workspace
